"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
var url = require("url");
var get_1 = require("./get");
var parse_1 = require("./parse");
exports.parse = parse_1.default;
var convert_1 = require("./convert");
exports.convert = convert_1.default;
function odata2openapi(metadataUrl, options) {
    var _a = url.parse(metadataUrl), path = _a.path, host = _a.host, protocol = _a.protocol;
    if (!options) {
        options = {
            basePath: path.replace(/\/\$metadata$/, ''),
            host: host
        };
    }
    return get_1.default(protocol, host, path).then(parse_1.default).then(function (service) { return convert_1.default(service.entitySets, options, service.version); });
}
exports.odata2openapi = odata2openapi;
//# sourceMappingURL=index.js.map